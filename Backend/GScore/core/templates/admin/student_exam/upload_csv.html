{% extends "unfold/layouts/base_simple.html" %}
{% load i18n static unfold %}

{% block title %}{% trans "Import Student Exam Results" %}{% endblock %}

{% block extrahead %}
    {{ block.super }}
    <script>
        
        document.addEventListener('DOMContentLoaded', function() {
        
            const theme = localStorage.getItem('unfold_theme') || 'dark';
            console.log('Current theme:', theme);
            
            
            if (theme === 'light') {
                document.body.classList.add('theme-light');
            } else if (theme === 'dark') {
                document.body.classList.add('theme-dark');
            }
        });
    </script>
{% endblock %}

{% block content %}
    <div class="mb-6">
        <h1 class="text-2xl font-semibold" style="color: rgb(var(--color-base-200))">
            {% trans "Import Student Exam Results" %}
        </h1>
    </div>

    <div class="shadow rounded-lg p-6 border" 
         style="background-color: rgb(var(--color-base-800)); border-color: rgba(255,255,255,0.05)">
        
        <form method="post" enctype="multipart/form-data" class="space-y-6">
            {% csrf_token %}

            <div class="space-y-2">
                <label for="file-upload" class="block text-sm font-medium" 
                       style="color: rgb(var(--color-base-400))">
                    {% trans "Upload CSV file" %}
                </label>
                <input 
                    type="file"
                    id="file-upload"
                    name="file"
                    accept=".csv"
                    required
                    class="unfold-file-input block w-full text-sm rounded-lg cursor-pointer">
                <p class="mt-1 text-xs" style="color: rgb(var(--color-base-500))">
                    {% trans "CSV file with student exam results" %}
                </p>
            </div>

            <div class="flex gap-3">
                <button 
                    type="submit"
                    class="inline-flex justify-center items-center px-4 py-2 
                           border-0 rounded-lg text-sm font-medium text-white
                           transition-colors duration-200"
                    style="background-color: rgb(var(--color-primary-600))"
                    onmouseover="this.style.backgroundColor='rgb(var(--color-primary-700))'"
                    onmouseout="this.style.backgroundColor='rgb(var(--color-primary-600))'">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"/>
                    </svg>
                    {% trans "Import" %}
                </button>

                <a 
                    href="{% url 'gscore_admin:core_studentexamresult_changelist' %}"
                    class="inline-flex justify-center items-center px-4 py-2 
                           rounded-lg text-sm font-medium border
                           transition-colors duration-200"
                    style="background-color: rgb(var(--color-base-700)); 
                           color: rgb(var(--color-base-300));
                           border-color: rgba(255,255,255,0.05)">
                    {% trans "Cancel" %}
                </a>
            </div>
        </form>

        {% if messages %}
            <div class="mt-6 space-y-3">
                {% for message in messages %}
                    <div class="flex items-start p-4 rounded-lg border">
                        <!-- Message content -->
                        <div class="ml-3 flex-1">
                            <p class="text-sm font-medium">{{ message }}</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    </div>

    <style>
        .unfold-file-input {
            background-color: rgb(var(--color-base-700));
            border: 1px solid rgba(255,255,255,0.05);
            color: rgb(var(--color-base-300));
            padding: 0.5rem;
        }
        
        .unfold-file-input:hover {
            background-color: rgb(var(--color-base-600));
        }
        
        .unfold-file-input::file-selector-button {
            background-color: rgb(var(--color-base-600));
            color: rgb(var(--color-base-200));
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 0.375rem;
            margin-right: 1rem;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 600;
        }
        
        .unfold-file-input::file-selector-button:hover {
            background-color: rgb(var(--color-base-500));
        }
    </style>
{% endblock %}